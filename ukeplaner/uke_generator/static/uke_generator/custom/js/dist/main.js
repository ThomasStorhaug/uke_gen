(()=>{"use strict";const e=new class{constructor(e){this.course_data=e,this.course="",this.available_subjects=this.course_data["Fellesfag vg1"],this.teachers={};for(let e of this.available_subjects)this.teachers[e]="";this.schedule=[];for(let e=0;e<5;e++){var t=[];for(let e=0;e<5;e++)t.push({teacher:"",subject:"",room:"",color:"",double:!1});this.schedule.push(t)}}set_course(e){this.course=e,this.set_available_subjects(e),this.set_teachers()}set_available_subjects(e){this.available_subjects=this.course_data["Fellesfag vg1"].concat(this.course_data[e])}set_teachers(){let e={};for(let t in this.teachers)this.available_subjects.includes(t)?e[t]=this.teachers[t]:e[t]="";this.teachers=e}set_teacher(e,t){this.available_subjects.includes(e)?this.teachers[e]=t:console.log("Error: Trying to set a teacher in a subject not in course!")}get_available_subjects(){return this.available_subjects}set_period(e,t,s){this.schedule[e][t]=s}get_period(e,t){return this.schedule[e][t]}get_schedule(){return this.schedule}}(course_subjects);function t(t,s){e.set_teacher(t,s),console.log(e.teachers)}function s(s){e.set_course(s),function(){const s=e.get_available_subjects(),c=document.getElementById("teacher-container");for(;c.hasChildNodes();)c.removeChild(c.firstChild);for(let e of s){var a=document.createElement("div");a.setAttribute("class","input-group");var r=document.createElement("input"),i=document.createElement("label"),l=document.createElement("button");r.setAttribute("type","text"),r.setAttribute("id","teacher-input-"+e),r.setAttribute("class","form-control"),r.addEventListener("change",(function(){let t=document.getElementById(`teacher-input-${e}`);t.classList.contains("is-valid")&&t.classList.remove("is-valid")})),i.setAttribute("for","teacher-input-"+e),i.innerText=e,l.setAttribute("class","btn btn-outline-secondary"),l.setAttribute("type","button"),l.setAttribute("id",`add-teacher-to-${e}`),l.addEventListener("click",(function(){let s=document.getElementById(`teacher-input-${e}`);s.classList.add("is-valid"),t(e,s.value)})),l.innerText="Legg til",a.appendChild(r),a.appendChild(l),c.appendChild(i),c.appendChild(a)}}()}var c=document.getElementById("course-select");c.addEventListener("change",(function(){s(c.options[c.selectedIndex].value)})),document.getElementById("modal_update_schedule_btn").addEventListener("click",(function(){let t=document.getElementById("modal-active-period").value;!function(t,s,c){let a=document.getElementById("modal_room_input").value,r=document.querySelector("input[name='modal_subject_select']:checked");if(r)var i=r.value;else i="";var l={teacher:e.teachers[i],subject:i,room:a};e.set_period(t,s,l);let n=e.get_period(t,s),o=[n.subject,n.room,n.teacher],u="";for(let e of o)e&&(u=u.concat(`${e}\n`));let d=document.getElementById(`p${s}_d${t}`),h=d.parentElement;d.innerText=u,c&&h.parentElement.classList.contains("schedule-preview__first-row")&&(h.setAttribute("rowspan","2"),h.classList.remove("schedule-preview__period--first"),h.classList.add("schedule-preview__period--double"),document.getElementById(`p${s+1}_d${t}`).parentElement.remove())}(Number(t.substr(4,1)),Number(t.substr(1,1)),document.getElementById("period-is-double").checked)})),window.set_selected_course=s,window.prepare_modal=function(t){const s=t.id,c=document.getElementById("modal-active-period"),a=document.getElementById("modal_course_container");var r=Number(s.substr(4,1)),i=Number(s.substr(1,1));c.value=s;const l=e.get_available_subjects(),n=e.get_period(r,i);for(;a.hasChildNodes();)a.removeChild(a.firstChild);for(let e of l){var o=document.createElement("input");o.setAttribute("type","radio"),o.setAttribute("id","modal_subject_"+e),o.setAttribute("class","btn-check"),o.setAttribute("name","modal_subject_select"),o.setAttribute("value",e),e==n.subject&&o.setAttribute("checked","true"),o.setAttribute("data-bs-dismiss","modal");var u=document.createElement("label");u.setAttribute("class","btn"),u.setAttribute("for","modal_subject_"+e),u.innerText=e,a.appendChild(o),a.appendChild(u)}}})();